<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muslim Toolkit - Tools Islami Digital</title>

    
    <style>
        /* --- STYLE DASAR (LIGHT MODE) --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #e9eef2;
            transition: background-color 0.5s, color 0.5s; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .assistant-container {
            max-width: 800px;
            width: 100%;
            background-color: #ffffff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            transition: background-color 0.5s, box-shadow 0.5s;
        }
        .welcome-message {
            text-align: center;
            font-size: 1.5em;
            font-weight: 600;
            color: #4CAF50;
            margin-bottom: 15px;
            padding: 10px;
            border: 2px solid #4CAF50;
            border-radius: 8px;
            background-color: #e8f5e9;
            transition: background-color 0.5s, color 0.5s;
        }
        /* Style Umum Asisten */
        h1 {
            color: #1a5a9e;
            text-align: center;
            border-bottom: 2px solid #1a5a9e;
            padding-bottom: 10px;
            transition: color 0.3s, border-bottom-color 0.3s;
        }
        h3 {
            color: #333;
            margin-top: 25px;
            transition: color 0.5s;
        }
        hr {
            border: 0;
            height: 1px;
            background-color: #ddd;
            margin: 20px 0;
            transition: background-color 0.5s;
        }
        #display-waktu {
            font-size: 2.5em;
            font-weight: bold;
            color: #e8491d;
            text-align: center;
            margin-bottom: 10px; 
            padding: 10px;
            background-color: #fff3e0;
            border-radius: 8px;
            transition: background-color 0.5s, color 0.5s;
        }

        /* Style Baru: Notifikasi Waktu Shalat */
        #shalat-notif {
            padding: 15px;
            background-color: #fce4ec;
            border: 2px solid #d81b60;
            border-radius: 8px;
            text-align: center;
            font-size: 1.1em;
            margin-bottom: 20px;
            display: none;
            transition: background-color 0.5s, border-color 0.5s, color 0.5s;
        }
        #shalat-notif strong {
            display: block;
            font-size: 1.3em;
            color: #d81b60;
            margin-bottom: 5px;
        }
        .niat-teks {
            font-style: italic;
            margin-top: 10px;
            font-size: 0.9em;
            background-color: #fff8fb;
            padding: 5px;
            border-radius: 4px;
        }


        /* Style Tambahan untuk Countdown */
        #countdown-notif {
            text-align: center; 
            margin-top: 10px; 
            font-size: 1.1em; 
            color: #008cba;
            padding: 5px 0;
            transition: color 0.5s;
        }
        /* Style Jadwal Salat */
        .jadwal-salat-grid {
            display: grid;
            /* Diperbarui untuk menampung 8 waktu (4 kolom) */
            grid-template-columns: repeat(4, 1fr); 
            gap: 10px;
            margin-bottom: 15px;
        }
        .waktu-salat {
            padding: 10px;
            background-color: #e3f2fd;
            border-radius: 5px;
            text-align: center;
            border: 1px solid #bbdefb;
            transition: background-color 0.5s, border-color 0.5s;
        }
        .waktu-salat strong {
            display: block;
            font-size: 1.2em;
            color: #0d47a1;
            transition: color 0.5s;
        }
        /* Style Terjemahan */
        #terjemahan-output {
            margin-top: 10px;
            padding: 15px;
            border-radius: 5px;
            background-color: #f0f8ff;
            border: 1px solid #cceeff;
            min-height: 40px;
            text-align: right; 
            font-size: 1.5em;
            direction: rtl; 
            transition: background-color 0.5s, border-color 0.5s;
        }
        /* Style Qur'an Digital */
        #quran-output {
            margin-top: 10px;
            font-size: 1em;
            padding: 10px;
            background-color: #e8f5e9; 
            border: 1px solid #c8e6c9;
            border-radius: 5px;
            min-height: 40px;
            transition: background-color 0.5s, border-color 0.5s;
        }
        /* Style untuk Input & Tombol Umum */
        .input-group {
            display: flex;
            margin-bottom: 15px;
            align-items: center; 
        }
        input[type="text"] {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            transition: background-color 0.5s, border-color 0.5s, color 0.5s;
        }
        button {
            padding: 10px 15px;
            background-color: #008cba;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 5px;
            transition: background-color 0.2s;
            white-space: nowrap; 
        }
        button:hover {
            background-color: #007bb0;
        }
        /* Style Khusus Fitur Salawat */
        #cari-salawat-btn {
            background-color: #4CAF50;
        }
        #cari-salawat-btn:hover {
            background-color: #45a049;
        }
        /* Tombol download tiktok */
        .tiktok-download-group button {
            flex-grow: 1;
            margin-left: 0; 
            margin-right: 10px; 
            padding: 12px 15px;
        }
        /* Pengaturan Warna */
        .color-control-grid {
            display: flex;
            flex-wrap: wrap; 
            gap: 10px;
            margin-top: 10px;
            margin-bottom: 20px;
        }
        .color-control-grid button {
            flex-grow: 1;
            min-width: 100px; 
            margin-left: 0;
            padding: 8px 12px;
            font-size: 0.9em;
            color: white;
        }
        /* PENCARIAN BESAR */
        #big-search-form {
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f5f5f5;
            border-radius: 10px;
            border: 1px solid #eee;
            transition: background-color 0.5s;
        }
        
        /* Style Tombol Dark Mode */
        #dark-mode-toggle {
            float: right;
            background-color: #555;
            color: white;
            padding: 8px 12px;
            font-size: 0.9em;
            margin-bottom: 10px;
            margin-left: 10px; /* Jarak dari tombol admin */
        }
        #dark-mode-toggle:hover {
            background-color: #333;
        }
        
        /* --- STYLE KHUSUS TOMBOL ADMIN RAHASIA BARU --- */
        #admin-toggle-btn {
            float: right;
            background-color: #f7f7f7;
            color: #d32f2f; /* Merah samar */
            border: 1px solid #d32f2f;
            padding: 8px 12px;
            font-size: 0.75em; /* Lebih kecil dari Dark Mode */
            cursor: pointer;
            opacity: 0.6; /* Membuatnya samar */
            margin-bottom: 10px;
            transition: opacity 0.2s, background-color 0.2s;
        }
        #admin-toggle-btn:hover {
            opacity: 1.0;
            background-color: #fff8e1;
        }
        /* Dark Mode adjustment for the secret button */
        .dark-mode #admin-toggle-btn {
            background-color: #2a2a2a;
            color: #ffcc80; /* Orange/Yellow for dark mode */
            border-color: #ffcc80;
        }
        .dark-mode #admin-toggle-btn:hover {
            background-color: #444;
        }
        
        /* --- STYLE DARK MODE UMUM --- */
        .dark-mode {
            background-color: #121212 !important;
            color: #e0e0e0;
        }
        .dark-mode .assistant-container {
            background-color: #1e1e1e;
            box-shadow: 0 10px 25px rgba(255, 255, 255, 0.1);
        }
        .dark-mode h1, .dark-mode h3 {
            color: #e0e0e0 !important;
            border-bottom-color: #444 !important;
        }
        .dark-mode hr {
            background-color: #444;
        }
        .dark-mode .welcome-message {
            background-color: #38761d;
            color: #e0e0e0;
            border-color: #4CAF50;
        }
        .dark-mode #display-waktu {
            background-color: #333;
            color: #ffb74d;
        }
        .dark-mode #countdown-notif {
            color: #81d4fa;
        }
        .dark-mode .jadwal-salat-grid .waktu-salat {
            background-color: #333;
            border-color: #555;
            color: #ccc;
        }
        .dark-mode .waktu-salat small {
            color: #aaa;
        }
        .dark-mode .waktu-salat strong {
            color: #bbdefb;
        }
        .dark-mode #big-search-form {
            background-color: #2a2a2a;
            border-color: #333;
        }
        .dark-mode input[type="text"] {
            background-color: #444;
            border-color: #666;
            color: #fff;
        }
        .dark-mode #quran-output, .dark-mode #terjemahan-output {
            background-color: #333;
            border-color: #555;
            color: #fff;
        }
        .dark-mode #shalat-notif {
            background-color: #4A148C;
            border-color: #6A1B9A;
            color: #fff;
        }
        .dark-mode #shalat-notif strong {
            color: #F8BBD0;
        }
        .dark-mode .niat-teks {
            background-color: #6A1B9A;
        }
    </style>
</head>
<body>
    
    <div id="main-assistant" class="assistant-container">
        
        <button id="admin-toggle-btn" onclick="showAdminPanel()">üîë ADMIN</button>
        <button id="dark-mode-toggle" onclick="toggleDarkMode()">‚òÄÔ∏è Mode Gelap</button>

        <div class="welcome-message">
            Welcome di Web Muslim
        </div>
        
        <h1 id="main-title">SELAMAT DATANG DI MUSLIM TOOLKIT (Dibuat oleh Raihan)</h1>
        
        <hr>
        
        <h3>üöÄ Pencarian Cepat Google</h3>
        <form id="big-search-form" action="https://www.google.com/search" method="GET" target="_blank">
            <input type="text" name="q" id="big-search-input" placeholder="Cari apapun, di mana pun...">
            <button type="submit">Cari Sekarang</button>
        </form>
        
        <hr>

        <h3>‚è∞ Waktu Saat Ini</h3>
        <div id="display-waktu">Memuat Waktu...</div>
        
        <div id="countdown-notif">Memuat hitungan mundur...</div>

        <div id="shalat-notif">
            <strong>üì¢ WAKTU SHALAT DZUHUR TELAH TIBA!</strong>
            <p>Segera ambil wudhu, siapkan diri Anda untuk beribadah.</p>
            <p>Jangan tunda-tunda waktu shalat, Raihan.</p>
            <div class="niat-teks">
                Niat Shalat Dzuhur: **"Ushalli fardhadzh-zhuhri arba'a raka'aatin mustaqbilal qiblati adaa-an lillahi ta'aala."**
            </div>
        </div>

        <hr>

        <h3>üïå Jadwal Salat</h3>
        <p id="prayer-location-display" style="text-align: center; font-style: italic; color: #008cba; font-size: 0.9em;">Jadwal statis untuk default lokasi. Atur lokasi di bawah.</p>
        <div class="jadwal-salat-grid">
             <div class="waktu-salat">
                <strong id="imsak-time">04:00</strong>
                <small>Imsak</small>
            </div>
            <div class="waktu-salat">
                <strong id="subuh-time">04:20</strong>
                <small>Subuh</small>
            </div>
            <div class="waktu-salat">
                <strong id="syuruk-time">05:40</strong>
                <small>Syuruk</small>
            </div>
            <div class="waktu-salat">
                <strong id="terbit-time">05:45</strong>
                <small>Terbit</small>
            </div>
            <div class="waktu-salat">
                <strong id="dzuhur-time">11:45</strong>
                <small>Dzuhur</small>
            </div>
            <div class="waktu-salat">
                <strong id="ashar-time">15:05</strong>
                <small>Ashar</small>
            </div>
            <div class="waktu-salat">
                <strong id="maghrib-time">17:50</strong>
                <small>Maghrib</small>
            </div>
            <div class="waktu-salat">
                <strong id="isya-time">19:00</strong>
                <small>Isya</small>
            </div>
        </div>
        
        <div style="text-align: center; margin-bottom: 10px;">
            <button id="set-location-btn" onclick="getPrayerTimesByLocation()">Atur Lokasi & Jadwal Otomatis</button>
        </div>
        
        <p style="text-align: center;">
            <a href="https://bimasislam.kemenag.go.id/jadwalshalat" target="_blank" class="salat-link-button">Cek Jadwal Resmi Kemenag</a>
        </p>

        <div style="text-align: center; margin-bottom: 20px; padding: 10px; border: 1px dashed #e8491d; border-radius: 8px;">
            <p style="font-weight: bold; margin-bottom: 5px; color: #e8491d;"></p>
            <iframe 
                width="100%" 
                height="315" 
                src="https://www.youtube.com/embed/IaqihLTtQ1s" 
                title="YouTube video player" 
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                referrerpolicy="strict-origin-when-cross-origin" 
                allowfullscreen>
            </iframe>
            
            <p style="font-size: 0.8em; margin-top: 5px; color: #555;">(JAGAN LUPA SOLAT BRE)</p>
        </div>
        <hr>
        
        <h3>üé∂ Cari Salawat Favorit</h3>
        <p style="font-size: 0.9em; color: #555;">Masukkan judul atau lirik awal Salawat yang ingin Anda dengarkan atau cari.</p>
        <div class="input-group">
            <input type="text" id="cari-salawat-input" placeholder="Contoh: Sholawat Badar, Ya Hanana...">
            <button id="cari-salawat-btn" onclick="cariSalawat()">Cari Salawat</button>
        </div>
        
        <hr>

        <h3>üïã Qur'an Digital (Cari Surah/Ayat)</h3>
        <p style="font-size: 0.9em; color: #555;">Masukkan Surah dan Ayat, atau kata kunci. (Contoh: **Al-Baqarah 282** atau **Tafsir Al-Fatihah**)</p>
        <div class="input-group">
            <input type="text" id="quran-input" placeholder="Surah/Ayat atau Kata Kunci Qur'an...">
            <button onclick="cariQuranDigital()">Cari / Baca</button>
        </div>
        <div id="quran-output">Silakan masukkan Surah atau Ayat yang ingin Anda baca/cari.</div>
        
        <hr>

        <h3>üìù Terjemahan Bahasa Arab</h3>
        <div class="input-group">
            <input type="text" id="arab-input" placeholder="Ketik kata/frasa Indonesia di sini...">
            <button onclick="terjemahkanArab()">Terjemahkan</button>
        </div>
        <div id="terjemahan-output">Hasil terjemahan akan muncul di sini (Bahasa Arab)...</div>
        
        <hr>

        <h3>üõí Pencarian Produk/Makanan</h3>
        <div class="input-group">
            <input type="text" id="cari-produk-input" placeholder="Contoh: Sepatu olahraga, Nasi Goreng terdekat...">
            <button onclick="cariProduk()">Cari Produk</button>
        </div>
        
        <hr>

        <h3>‚¨áÔ∏è Unduh Video/Audio TikTok (MP4/MP3)</h3>
        <p style="font-size: 0.9em; color: #555;">Tempel tautan video TikTok di bawah ini, lalu pilih format unduhan (memerlukan situs pihak ketiga).</p>
        <div class="input-group">
            <input type="text" id="tiktok-link-input" placeholder="Tempel link video TikTok di sini (misalnya: https://vt.tiktok.com/xxxxxx)...">
        </div>

        <div class="input-group tiktok-download-group">
            <button onclick="downloadTikTokMP4()">Unduh MP4 (Video)</button>
            <button style="background-color: #e8491d;" onclick="downloadTikTokMP3()">Unduh MP3 (Audio)</button>
        </div>
        
        <hr>
        
        <h3>üéµ Pencarian Lagu Cepat</h3>
        <div class="input-group">
            <input type="text" id="cari-lagu-input" placeholder="Judul lagu atau penyanyi...">
            <button onclick="cariLagu()">Cari Lagu</button>
        </div>

        <h3>üèõÔ∏è Layanan Publik</h3>
        <div class="input-group">
            <input type="text" id="layanan-publik-input" placeholder="Contoh: Kantor Polisi Jakarta, Puskesmas terdekat...">
            <button onclick="cariLayananPublik()">Cari Layanan</button>
        </div>

        <hr>
        
        <h3>üé® Pengaturan Warna Teks Judul</h3>
        <p>Ganti Warna Teks Judul Utama (H1):</p>
        <div class="color-control-grid">
            <button style="background-color: red;" onclick="gantiWarnaTeks('red')">Merah</button>
            <button style="background-color: yellow; color: black;" onclick="gantiWarnaTeks('yellow')">Kuning</button>
            <button style="background-color: green;" onclick="gantiWarnaTeks('green')">Hijau</button>
            <button style="background-color: blue;" onclick="gantiWarnaTeks('blue')">Biru</button>
            <button style="background-color: orange; color: black;" onclick="gantiWarnaTeks('orange')">Oranye</button>
            <button style="background-color: #4a4a4a;" onclick="gantiWarnaTeks('#4a4a4a')">Abu Tua</button>
            <button style="background-color: black;" onclick="gantiWarnaTeks('black')">Hitam</button>
            <button style="background-color: #006400;" onclick="gantiWarnaTeks('#006400')">Hijau Gelap</button>
            <button style="background-color: pink; color: black;" onclick="gantiWarnaTeks('pink')">Pink</button>
            <button onclick="gantiWarnaTeks('#1a5a9e')">Standar</button>
        </div>

        <hr>
        
        <h3>üé® Pengaturan Tampilan Latar Belakang</h3>
        <p>Ganti Warna Latar Belakang (Body):</p>
        <div class="color-control-grid">
            <button style="background-color: #ff5733;" onclick="gantiWarnaLatar('#ff5733')">Merah</button>
            <button style="background-color: #ffc300; color: black;" onclick="gantiWarnaLatar('#ffc300')">Kuning</button>
            <button style="background-color: #4CAF50;" onclick="gantiWarnaLatar('#4CAF50')">Hijau</button>
            <button style="background-color: #ff8c00; color: black;" onclick="gantiWarnaLatar('#ff8c00')">Oranye</button>
            <button style="background-color: #333333;" onclick="gantiWarnaLatar('#333333')">Hitam</button>
            <button style="background-color: #ff69b4; color: black;" onclick="gantiWarnaLatar('#ff69b4')">Pink</button>
            <button onclick="gantiWarnaLatar('#e9eef2')">Standar</button>
            
            <button onclick="gantiWarnaLatar('lightgray'); color: black;">Abu-abu Terang</button>
            <button onclick="gantiWarnaLatar('#ffe0b2'); color: black;">Peach Lembut</button>
            <button onclick="gantiWarnaLatar('#b2ebf2'); color: black;">Biru Muda</button>
        </div>
        
        <hr>
        
        <div id="admin-panel-secret" style="display: none; margin-top: 30px; padding: 20px; border: 2px solid #e8491d; border-radius: 10px; background-color: #ffe0e0;">
            <h3>üîë Panel Admin Rahasia: Log Kunjungan Lokal</h3>
            <p style="font-size: 0.9em;">**CATATAN PENTING:** Data ini hanya tersimpan di perangkat ini (menggunakan `localStorage`) dan tidak dapat dilihat oleh Anda dari perangkat lain tanpa adanya server.</p>
            <div id="visitor-log-output" style="max-height: 200px; overflow-y: auto; background-color: #fff; padding: 10px; border-radius: 5px; border: 1px solid #ccc; font-size: 0.9em;">
                Memuat riwayat kunjungan...
            </div>
            <button onclick="clearVisitorLog()" style="margin-top: 10px; background-color: #d32f2f;">Hapus Semua Log Kunjungan</button>
        </div>
        
    </div>

    <script>
        
        // --- JADWAL SHALAT (HARUS DIGANTI OLEH PENGGUNA) ---
        const PRAYER_TIMES_CONFIG = {
            'Imsak': '04:00', // Waktu baru
            'Subuh': '04:20', 
            'Syuruk': '05:40', 
            'Terbit': '05:45', // Waktu baru
            'Dzuhur': '11:45',
            'Ashar': '15:05',
            'Maghrib': '17:50',
            'Isya': '19:00'
        };
        
        let dzuhurNotified = false;

        // --- FUNGSI UPDATE WAKTU & CEK SHALAT ---
        function updateWaktu() {
            const waktuDisplay = document.getElementById('display-waktu');
            const now = new Date();
            const waktuString = now.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            
            if (waktuDisplay) {
                waktuDisplay.textContent = waktuString;
            }

            // Memperbarui tampilan statis Jadwal Salat
            document.getElementById('imsak-time').textContent = PRAYER_TIMES_CONFIG['Imsak'];
            document.getElementById('subuh-time').textContent = PRAYER_TIMES_CONFIG['Subuh'];
            document.getElementById('dzuhur-time').textContent = PRAYER_TIMES_CONFIG['Dzuhur'];
            document.getElementById('ashar-time').textContent = PRAYER_TIMES_CONFIG['Ashar'];
            document.getElementById('maghrib-time').textContent = PRAYER_TIMES_CONFIG['Maghrib'];
            document.getElementById('isya-time').textContent = PRAYER_TIMES_CONFIG['Isya'];
            document.getElementById('syuruk-time').textContent = PRAYER_TIMES_CONFIG['Syuruk'];
            document.getElementById('terbit-time').textContent = PRAYER_TIMES_CONFIG['Terbit']; 

            // --- Pengecekan Waktu Shalat Dzuhur ---
            const dzuhurTime = PRAYER_TIMES_CONFIG['Dzuhur'].split(':');
            const dzuhurHour = parseInt(dzuhurTime[0]);
            const dzuhurMinute = parseInt(dzuhurTime[1]);

            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();

            const shalatNotif = document.getElementById('shalat-notif');

            if (currentHour === dzuhurHour && currentMinute >= dzuhurMinute && !dzuhurNotified) {
                shalatNotif.style.display = 'block';
                dzuhurNotified = true; 
                
                setTimeout(() => {
                    dzuhurNotified = false; 
                    shalatNotif.style.display = 'none';
                }, 24 * 60 * 60 * 1000); 
                
            } else if (currentHour > dzuhurHour || (currentHour === dzuhurHour && currentMinute > dzuhurMinute + 10)) {
                shalatNotif.style.display = 'none';
            }
            
            if (currentHour === 0 && currentMinute === 0 && now.getSeconds() < 10) {
                 dzuhurNotified = false;
            }
        }
        
        // --- FUNGSI HITUNGAN MUNDUR SHALAT ---
        function updateCountdown() {
            const today = new Date();
            const now = today.getTime();
            
            let nextPrayerName = '';
            let nextPrayerTimeMillis = 0;
            
            const todayPrayerMillis = [];
            
            for (const name in PRAYER_TIMES_CONFIG) {
                const timeString = PRAYER_TIMES_CONFIG[name];
                const [h, m] = timeString.split(':').map(Number);
                
                const prayerDate = new Date(today);
                prayerDate.setHours(h, m, 0, 0);
                todayPrayerMillis.push({ name, time: prayerDate.getTime() });
            }
            
            todayPrayerMillis.sort((a, b) => a.time - b.time);
            
            for (const prayer of todayPrayerMillis) {
                if (prayer.time > now) {
                    nextPrayerName = prayer.name;
                    nextPrayerTimeMillis = prayer.time;
                    break;
                }
            }
            
            let timeRemaining = 0;
            
            if (nextPrayerTimeMillis > 0) {
                timeRemaining = nextPrayerTimeMillis - now;
            } else {
                const tomorrow = new Date(today);
                tomorrow.setDate(today.getDate() + 1);
                
                const subuhTime = PRAYER_TIMES_CONFIG['Subuh'];
                const [h, m] = subuhTime.split(':').map(Number);
                
                const subuhTomorrow = new Date(tomorrow);
                subuhTomorrow.setHours(h, m, 0, 0);
                
                nextPrayerName = 'Subuh Besok';
                nextPrayerTimeMillis = subuhTomorrow.getTime();
                timeRemaining = subuhTomorrow - now;
            }
            
            const totalSeconds = Math.floor(timeRemaining / 1000);
            const seconds = totalSeconds % 60;
            const minutes = Math.floor(totalSeconds / 60) % 60;
            const hours = Math.floor(totalSeconds / 3600);
            
            const hDisplay = String(hours).padStart(2, '0');
            const mDisplay = String(minutes).padStart(2, '0');
            const sDisplay = String(seconds).padStart(2, '0');
            
            document.getElementById('countdown-notif').innerHTML = 
                `‚è±Ô∏è **Waktu menuju ${nextPrayerName}:** <span style="font-weight: bold;">${hDisplay}:${mDisplay}:${sDisplay}</span>`;

            setTimeout(updateCountdown, 1000);
        }

        // --- FUNGSI GEOLOCATION ---
        function getPrayerTimesByLocation() {
            const locationDisplay = document.getElementById('prayer-location-display');
            const locationButton = document.getElementById('set-location-btn');
            locationDisplay.textContent = "Mencari lokasi Anda...";
            locationButton.disabled = true;

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        
                        locationDisplay.innerHTML = `‚úÖ Lokasi ditemukan! (Lat: ${lat.toFixed(4)}, Lon: ${lng.toFixed(4)})`;
                        locationButton.disabled = false;
                        
                        alert(`Lokasi ditemukan! Lintang: ${lat.toFixed(4)}, Bujur: ${lng.toFixed(4)}. \n\n‚ö†Ô∏è UNTUK JADWAL AKURAT: Anda perlu mengganti nilai PRAYER_TIMES_CONFIG di dalam kode ini secara manual atau mengintegrasikan API eksternal waktu salat menggunakan Lintang dan Bujur di atas.`);

                    },
                    (error) => {
                        locationDisplay.innerHTML = "‚ö†Ô∏è Gagal mendapatkan lokasi. Pastikan izin lokasi aktif.";
                        locationButton.disabled = false;
                        console.error("Error getting location:", error);
                    }
                );
            } else {
                locationDisplay.innerHTML = "Browser Anda tidak mendukung Geolocation.";
                locationButton.disabled = false;
            }
        }
        
        // -------------------------------------------------------------------
        // --- FUNGSI PELACAKAN PENGUNJUNG (LOKAL ONLY) ---
        // -------------------------------------------------------------------

        const LOG_KEY = 'raihan_visitor_log';

        function logVisitor() {
            let logs = JSON.parse(localStorage.getItem(LOG_KEY)) || [];
            
            const now = new Date();
            const logEntry = {
                timestamp: now.toISOString(),
                timeDisplay: now.toLocaleString('id-ID', { dateStyle: 'full', timeStyle: 'medium' }),
                action: 'Visit' 
            };
            
            logs.unshift(logEntry); 
            
            if (logs.length > 50) {
                logs = logs.slice(0, 50);
            }
            
            localStorage.setItem(LOG_KEY, JSON.stringify(logs));
        }

        function displayVisitorLog() {
            const logOutput = document.getElementById('visitor-log-output');
            const logs = JSON.parse(localStorage.getItem(LOG_KEY)) || [];
            
            if (logs.length === 0) {
                logOutput.innerHTML = 'Belum ada riwayat kunjungan yang tercatat di perangkat ini.';
                return;
            }

            let html = '<ol style="padding-left: 20px;">';
            logs.forEach((log) => {
                html += `<li><strong>${log.timeDisplay}</strong> - ${log.action}</li>`;
            });
            html += '</ol>';
            logOutput.innerHTML = html;
        }

        function clearVisitorLog() {
            if (confirm("Apakah Anda yakin ingin menghapus semua Log Kunjungan di perangkat ini?")) {
                localStorage.removeItem(LOG_KEY);
                displayVisitorLog();
                alert("Log berhasil dihapus!");
            }
        }
        
        // FUNGSI UNTUK MENAMPILkan/MENYEMBUNYIKAN PANEL ADMIN
        function showAdminPanel() {
            const panel = document.getElementById('admin-panel-secret');
            const button = document.getElementById('admin-toggle-btn');
            if (panel.style.display === 'none' || panel.style.display === '') {
                panel.style.display = 'block';
                button.textContent = 'üîí TUTUP ADMIN';
                displayVisitorLog();
            } else {
                panel.style.display = 'none';
                button.textContent = 'üîë ADMIN';
            }
        }
        
        // --- FUNGSI LAINNYA ---
        function toggleDarkMode() {
            const body = document.body;
            const container = document.querySelector('.assistant-container');
            const toggleButton = document.getElementById('dark-mode-toggle');
            
            body.classList.toggle('dark-mode');
            container.classList.toggle('dark-mode');

            if (body.classList.contains('dark-mode')) {
                toggleButton.innerHTML = 'üåô Mode Terang';
                localStorage.setItem('theme', 'dark');
            } else {
                toggleButton.innerHTML = '‚òÄÔ∏è Mode Gelap';
                localStorage.setItem('theme', 'light');
            }
        }

        function gantiWarnaTeks(warna) {
            const mainTitle = document.getElementById('main-title');
            if (mainTitle) {
                mainTitle.style.color = warna;
            }
        }
        
        function gantiWarnaLatar(warna) {
            document.body.style.backgroundColor = warna;
        }

        function cariSalawat() {
            const query = document.getElementById('cari-salawat-input').value.trim();
            if (query) {
                const searchUrl = `https://www.youtube.com/results?search_query=${encodeURIComponent(query)} sholawat`;
                window.open(searchUrl, '_blank');
                alert(`Mencari Salawat "${query}". Hasil Salawat terbaik telah dibuka di tab baru!`);
            } else {
                alert("Masukkan judul atau lirik Salawat yang ingin Anda cari.");
            }
        }
        
        function downloadTikTokMP4() {
            const link = document.getElementById('tiktok-link-input').value.trim();
            if (!link) {
                alert("Masukkan link video TikTok terlebih dahulu!");
                return;
            }
            const searchUrl = `https://www.google.com/search?q=${encodeURIComponent('snaptik ' + link)}`;
            window.open(searchUrl, '_blank');
            alert("Halaman pengunduh video MP4 telah dibuka di tab baru. Cari situs download yang terpercaya.");
        }

        function downloadTikTokMP3() {
            const link = document.getElementById('tiktok-link-input').value.trim();
            if (!link) {
                alert("Masukkan link video TikTok terlebih dahulu!");
                return;
            }
            const searchUrl = `https://www.google.com/search?q=${encodeURIComponent('tiktok mp3 converter ' + link)}`;
            window.open(searchUrl, '_blank');
            alert("Halaman pengunduh audio MP3 telah dibuka di tab baru. Cari situs converter yang terpercaya.");
        }
        
        function cariLagu() {
            const query = document.getElementById('cari-lagu-input').value.trim();
            if (query) {
                const searchUrl = `https://www.youtube.com/results?search_query=${encodeURIComponent(query)} lagu`;
                window.open(searchUrl, '_blank');
            } else {
                alert("Masukkan judul atau penyanyi lagu!");
            }
        }

        function cariLayananPublik() {
            const query = document.getElementById('layanan-publik-input').value.trim();
            if (query) {
                const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(query)} layanan publik`;
                window.open(searchUrl, '_blank');
            } else {
                alert("Masukkan layanan publik yang ingin dicari!");
            }
        }

        function cariProduk() {
            const query = document.getElementById('cari-produk-input').value.trim();
            if (query) {
                const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
                window.open(searchUrl, '_blank');
            } else {
                alert("Masukkan nama produk atau makanan yang ingin Anda cari!");
            }
        }

        function cariQuranDigital() {
            const input = document.getElementById('quran-input').value.trim();
            const output = document.getElementById('quran-output');
            
            if (input === "") {
                output.innerHTML = "Masukkan nama Surah, Ayat, atau kata kunci.";
                return;
            }

            const query = `Qur'an Kemenag ${input}`;
            const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
            window.open(searchUrl, '_blank');
            output.innerHTML = `Mencari **${input}**. Hasil terbaik Qur'an Digital telah dibuka di tab baru.`;
        }

        function terjemahkanArab() {
            const input = document.getElementById('arab-input').value.trim().toLowerCase();
            const output = document.getElementById('terjemahan-output');
            
            let terjemahan = "";

            if (input === "") {
                output.textContent = "Silakan masukkan kata atau frasa Indonesia.";
                output.style.direction = 'ltr';
                output.style.textAlign = 'center';
                return;
            }
            if (input.includes('selamat pagi')) {
                terjemahan = "ÿµŸéÿ®Ÿéÿßÿ≠Ÿè ÿßŸÑÿÆŸéŸäŸíÿ±"; 
            } else if (input.includes('terima kasih')) {
                terjemahan = "ÿ¥ŸèŸÉŸíÿ±Ÿãÿß"; 
            } else if (input.includes('assalamualaikum')) {
                terjemahan = "ŸàŸéÿπŸéŸÑŸéŸäŸíŸÉŸèŸÖŸè ÿßŸÑÿ≥ŸëŸéŸÑŸéÿßŸÖ"; 
            } else if (input.includes('bagaimana kabar')) {
                terjemahan = "ŸÉŸéŸäŸíŸÅŸé ÿ≠ŸéÿßŸÑŸèŸÉÿü"; 
            } else if (input.includes('cinta')) {
                terjemahan = "ÿ≠Ÿèÿ®Ÿë"; 
            } else {
                terjemahan = "ŸÑÿßŸé ÿ™ŸèŸàÿ¨ŸéÿØŸè ÿ™Ÿéÿ±Ÿíÿ¨ŸéŸÖŸéÿ©Ÿå ŸÑŸêŸáŸéÿ∞ŸêŸáŸê ÿßŸÑŸÉŸéŸÑŸêŸÖŸéÿ©Ÿê"; 
            }

            output.textContent = terjemahan;
            output.style.direction = 'rtl'; 
            output.style.textAlign = 'right';
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Load Dark Mode state
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                document.querySelector('.assistant-container').classList.add('dark-mode');
                document.getElementById('dark-mode-toggle').innerHTML = 'üåô Mode Terang';
            }
            
            // Log kunjungan saat halaman dimuat
            logVisitor();
            
            setInterval(updateWaktu, 1000); 
            updateCountdown(); 
        });

        // Membuat fungsi admin panel mudah diakses
        window.showAdminPanel = showAdminPanel;
        window.clearVisitorLog = clearVisitorLog;
    </script>

</body>
</html>
